# E-ì»¤ë¨¸ìŠ¤ ì„œë¹„ìŠ¤ ERD

**ğŸ“š ë¬¸ì„œ ëª©ë¡**

+ [1ï¸âƒ£ ìš”êµ¬ì‚¬í•­ ë¶„ì„ ë¬¸ì„œ](01.Requirements.md)
+ [2ï¸âƒ£ ë§ˆì¼ìŠ¤í†¤ ë¬¸ì„œ](02.Milestones.md)
+ 3ï¸âƒ£ ë‹¤ì´ì–´ê·¸ë¨ ë¬¸ì„œ
    + [ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ ë¬¸ì„œ](03-1.SequenceDiagram.md)
    + [ìƒíƒœ ë‹¤ì´ì–´ê·¸ë¨ ë¬¸ì„œ](03-2.StateDiagram.md)
+ [4ï¸âƒ£ ERD ë¬¸ì„œ](04.ERD.md)
+ [5ï¸âƒ£ API ëª…ì„¸](05.ApiDocument.md)

---

<!-- TOC -->
* [E-ì»¤ë¨¸ìŠ¤ ì„œë¹„ìŠ¤ ERD](#e-ì»¤ë¨¸ìŠ¤-ì„œë¹„ìŠ¤-erd)
  * [ERD ì‘ì„±](#erd-ì‘ì„±)
  * [ìƒíƒœ ë° íƒ€ì… ì •ì˜ (Status & Type)](#ìƒíƒœ-ë°-íƒ€ì…-ì •ì˜-status--type)
    * [ê±°ë˜ íƒ€ì… (transaction_type)](#ê±°ë˜-íƒ€ì…-transaction_type)
    * [ì¿ í° ìƒíƒœ (coupon_status)](#ì¿ í°-ìƒíƒœ-coupon_status)
    * [ì‚¬ìš© ìƒíƒœ (used_status)](#ì‚¬ìš©-ìƒíƒœ-used_status)
    * [íŒë§¤ ìƒíƒœ (sell_status)](#íŒë§¤-ìƒíƒœ-sell_status)
    * [ë­í¬ íƒ€ì… (rank_type)](#ë­í¬-íƒ€ì…-rank_type)
    * [ì£¼ë¬¸ ìƒíƒœ (order_status)](#ì£¼ë¬¸-ìƒíƒœ-order_status)
<!-- TOC -->

## ERD ì‘ì„±

```mermaid
erDiagram
    USERS ||--o| BALANCE: ""
    BALANCE ||--|{ BALANCE_TRANSACTION: ""
    USERS ||--o{ USER_COUPON: ""
    USERS ||--o{ ORDERS: ""
    COUPON ||--o{ USER_COUPON: ""
    ORDERS }o--|| USER_COUPON: ""
    ORDERS ||--|{ ORDER_PRODUCT: ""
    PRODUCT ||--o{ ORDER_PRODUCT: ""
    PRODUCT ||--o| PRODUCT_STOCK: ""
    PRODUCT ||--o{ PRODUCT_RANK: ""

    USERS {
        BIGINT user_id PK "ì‚¬ìš©ì ID"
        VARCHAR nickname "ë‹‰ë„¤ì„"
        TIMESTAMP created_at "ìƒì„±ì¼ì‹œ"
        TIMESTAMP updated_at "ìˆ˜ì •ì¼ì‹œ"
    }

    BALANCE {
        BIGINT balance_id PK "ì”ê³  ID"
        BIGINT user_id FK, UK "ì‚¬ìš©ì ID"
        BIGINT amount "ì”ê³  ê¸ˆì•¡"
        TIMESTAMP created_at "ìƒì„±ì¼ì‹œ"
        TIMESTAMP updated_at "ìˆ˜ì •ì¼ì‹œ"
    }

    BALANCE_TRANSACTION {
        BIGINT transaction_id PK "ê±°ë˜ ID"
        BIGINT balance_id FK "ì”ê³  ID"
        VARCHAR transaction_type "ê±°ë˜ íƒ€ì…"
        BIGINT amount "ê±°ë˜ ê¸ˆì•¡"
        TIMESTAMP created_at "ìƒì„±ì¼ì‹œ"
        TIMESTAMP updated_at "ìˆ˜ì •ì¼ì‹œ"
    }

    COUPON {
        BIGINT coupon_id PK "ì¿ í° ID"
        VARCHAR name "ì´ë¦„"
        VARCHAR coupon_status "ì¿ í° ìƒíƒœ"
        FLOAT discount_rate "í• ì¸ìœ¨"
        TIMESTAMP expired_at "ë§Œë£Œì¼ì‹œ"
        INT quantity "ìˆ˜ëŸ‰"
        TIMESTAMP created_at "ìƒì„±ì¼ì‹œ"
        TIMESTAMP updated_at "ìˆ˜ì •ì¼ì‹œ"
    }

    USER_COUPON {
        BIGINT user_coupon_id PK "ì‚¬ìš©ì ì¿ í° ID"
        BIGINT user_id FK "ì‚¬ìš©ì ID"
        BIGINT coupon_id FK "ì¿ í° ID"
        VARCHAR used_status "ì‚¬ìš© ìƒíƒœ"
        TIMESTAMP issued_at "ë°œê¸‰ì¼ì‹œ"
        TIMESTAMP used_at "ì‚¬ìš©ì¼ì‹œ"
        TIMESTAMP created_at "ìƒì„±ì¼ì‹œ"
        TIMESTAMP updated_at "ìˆ˜ì •ì¼ì‹œ"
    }

    PRODUCT {
        BIGINT product_id PK "ìƒí’ˆ ID"
        VARCHAR name "ì´ë¦„"
        BIGINT price "ê°€ê²©"
        VARCHAR sell_status "íŒë§¤ ìƒíƒœ"
        TIMESTAMP created_at "ìƒì„±ì¼ì‹œ"
        TIMESTAMP updated_at "ìˆ˜ì •ì¼ì‹œ"
    }

    PRODUCT_STOCK {
        BIGINT stock_id PK "ì¬ê³  ID"
        BIGINT product_id FK, UK "ìƒí’ˆ ID"
        INT quantity "ì¬ê³  ê°œìˆ˜"
        TIMESTAMP created_at "ìƒì„±ì¼ì‹œ"
        TIMESTAMP updated_at "ìˆ˜ì •ì¼ì‹œ"
    }

    PRODUCT_RANK {
        BIGINT rank_id PK "ë­í‚¹ ID"
        BIGINT product_id FK "ìƒí’ˆ ID"
        DATE rank_date "ë­í‚¹ ì¼ì"
        VARCHAR rank_type "ë­í‚¹ íƒ€ì…"
        BIGINT score "ë­í‚¹ ì ìˆ˜"
        TIMESTAMP created_at "ìƒì„±ì¼ì‹œ"
        TIMESTAMP updated_at "ìˆ˜ì •ì¼ì‹œ"
    }

    ORDERS {
        BIGINT order_id PK "ì£¼ë¬¸ ID"
        BIGINT user_id FK "ì‚¬ìš©ì ID"
        BIGINT user_coupon_id FK "ì‚¬ìš©ì ì¿ í° ID"
        VARCHAR order_status "ì£¼ë¬¸ ìƒíƒœ"
        BIGINT total_price "ì£¼ë¬¸ ì´ ê¸ˆì•¡"
        BIGINT discount_price "í• ì¸ ê¸ˆì•¡"
        TIMESTAMP created_at "ìƒì„±ì¼ì‹œ"
        TIMESTAMP updated_at "ìˆ˜ì •ì¼ì‹œ"
    }

    ORDER_PRODUCT {
        BIGINT order_product_id PK "ì£¼ë¬¸ ìƒí’ˆ ID"
        BIGINT order_id FK "ì£¼ë¬¸ ID"
        BIGINT product_id FK "ìƒí’ˆ ID"
        INT quantity "ìƒí’ˆ ê°œìˆ˜"
        BIGINT unit_price "ìƒí’ˆ ë‹¨ê°€ ê¸ˆì•¡"
        TIMESTAMP created_at "ìƒì„±ì¼ì‹œ"
        TIMESTAMP updated_at "ìˆ˜ì •ì¼ì‹œ"
    }
```

## ìƒíƒœ ë° íƒ€ì… ì •ì˜ (Status & Type)

### ê±°ë˜ íƒ€ì… (transaction_type)

**ì”ê³  íŠ¸ëœì­ì…˜ (BALANCE_TRANSACTION) í…Œì´ë¸”**

| Type   | Description |
|--------|-------------|
| CHARGE | ì¶©ì „          |
| USE    | ì°¨ê°          |

### ì¿ í° ìƒíƒœ (coupon_status)

**ì¿ í° (COUPON) í…Œì´ë¸”**

| Type        | Description |
|-------------|-------------|
| REGISTERED  | ë“±ë¡          |
| CANCELED    | ì·¨ì†Œ          |
| PUBLISHABLE | ë°œê¸‰ê°€ëŠ¥        |

### ì‚¬ìš© ìƒíƒœ (used_status)

**ì‚¬ìš©ì ì¿ í° (USER_COUPON) í…Œì´ë¸”**

| Type   | Description |
|--------|-------------|
| UNUSED | ë¯¸ì‚¬ìš©         |
| USED   | ì‚¬ìš©          |

### íŒë§¤ ìƒíƒœ (sell_status)

**ìƒí’ˆ (PRODUCT) í…Œì´ë¸”**

| Type         | Description |
|--------------|-------------|
| HOLD         | íŒë§¤ë³´ë¥˜        |
| SELLING      | íŒë§¤ì¤‘         |
| STOP_SELLING | íŒë§¤ì¤‘ì§€        |

### ë­í¬ íƒ€ì… (rank_type)

**ìƒí’ˆ ë­í‚¹ (PRODUCT_RANK) í…Œì´ë¸”**

| Type | Description |
|------|-------------|
| SELL | íŒë§¤          |

> ì°¨í›„, "ì¢‹ì•„ìš” ìˆ˜", "ëŒ“ê¸€ ìˆ˜"ê°€ ì¶”ê°€ ë  ìˆ˜ ìˆë‹¤ëŠ” ì˜ë„ë¥¼ ê°€ì§€ê³  ì„¤ê³„

### ì£¼ë¬¸ ìƒíƒœ (order_status)

**ì£¼ë¬¸ (ORDERS) í…Œì´ë¸”**

| Type    | Description |
|---------|-------------|
| CREATED | ì£¼ë¬¸ìƒì„±        |
| PAID    | ê²°ì œì™„ë£Œ        |
